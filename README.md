# ✨ 精灵1号 (Spirit One)

> **你的数字生命伴侣 —— 一个能自主学习、进化、创建 AI Agent 的精灵**

<p align="center">
  <img src="docs/assets/spirit-logo.png" alt="Spirit One" width="200" />
</p>

---

## 🎯 核心能力（无所不能！）

精灵1号集成 **Moltbot Agent 引擎**，拥有真正的智能体能力：

### 💻 编程开发

| 能力 | 说明 |
|------|------|
| ✍️ **写代码** | Python、JavaScript、Go、Rust...任何语言 |
| 🏗️ **开发应用** | 从零创建完整项目、Web应用、CLI工具 |
| 🐛 **查找 Bug** | 分析代码、定位问题、追踪错误 |
| 🔧 **修复代码** | 自动修复错误、重构优化 |
| 📖 **代码审查** | Review PR、提供建议、安全检查 |
| 🧪 **写测试** | 单元测试、集成测试、E2E 测试 |

### 🖥️ 服务器运维

| 能力 | 说明 |
|------|------|
| 🔐 **SSH 连接** | 连接远程服务器执行命令 |
| 📊 **日志分析** | 分析错误日志、定位问题根因 |
| 🛠️ **漏洞修复** | 安全扫描、漏洞修复、配置加固 |
| 📦 **自动部署** | CI/CD、Docker、K8s 部署 |
| 🔍 **监控告警** | CPU、内存、磁盘、网络监控 |
| ⚙️ **配置管理** | 环境变量、Nginx、数据库配置 |

### 🌐 网页自动化

| 能力 | 说明 |
|------|------|
| 🎯 **操作任何网页** | Playwright 驱动，模拟真人操作 |
| 🎫 **自动抢票** | 12306、演唱会、电影票、机票 |
| 🧧 **抢红包** | 微信群红包监控抢夺 |
| 📝 **填表提交** | 自动填写表单、提交申请 |
| 🔑 **登录管理** | Cookie 管理、自动登录、扫码授权 |
| 📸 **截图取证** | 网页截图、内容抓取、数据采集 |

### 🤖 AI Agent 系统

| 能力 | 说明 |
|------|------|
| 🧩 **创建专用 Agent** | "帮我创建一个抢票Agent" → 自动创建 |
| 🎭 **角色扮演** | 红包猎手、票务专员、运维助手、内容创作者 |
| 📋 **任务编排** | 复杂多步骤任务自动分解执行 |
| 🧠 **自主决策** | AI 自己判断该用什么工具 |
| 💾 **记忆系统** | 记住上下文、偏好、历史 |
| 🔄 **持续学习** | 从执行结果中学习优化 |

### 🌱 精灵特性

| 能力 | 说明 |
|------|------|
| **♾️ 能力无限** | 不断学习新技能，没有上限 |
| **🧠 任意大模型** | OpenAI、Claude、DeepSeek、硅基流动... |
| **🔐 安全可控** | 敏感操作需确认，一键终止 |
| **🎨 个性化形象** | 6种精灵风格，自定义名字 |

---

### 🎯 使用示例

**只需用自然语言告诉精灵，它就会自动执行：**

```
👤 你：帮我检查服务器上的 nginx 日志，看有没有报错

🌱 精灵：好的，我来连接服务器检查...
   [SSH连接] → [读取日志] → [分析错误]
   
   发现 3 个 502 错误，原因是后端服务响应超时。
   建议：1. 增加超时时间  2. 检查后端服务状态
   需要我帮你修复吗？

👤 你：写一个 Python 爬虫，每天抓取竞品价格

🌱 精灵：好的，我来创建爬虫项目...
   [创建项目] → [写爬虫代码] → [配置定时任务] → [测试运行]
   
   已完成！项目在 ~/projects/price-monitor/
   - spider.py: 爬虫主程序
   - config.yaml: 配置文件
   - 定时任务: 每天 9:00 执行
   
   首次运行结果：抓取到 15 个商品价格

👤 你：帮我抢明天北京到上海的高铁票

🌱 精灵：好的，我来帮你抢票...
   [打开12306] → [需要你扫码登录] → [开始监控]
   
   请扫码登录12306，我会持续监控票务情况。
   目标车次: G1/G3/G5 (二等座)
   有票会立即下单并微信通知你！

👤 你：分析这个 GitHub 项目的代码质量

🌱 精灵：好的，我来分析...
   [克隆仓库] → [代码扫描] → [性能分析] → [生成报告]
   
   分析完成！发现以下问题：
   🔴 严重: 3 个 SQL 注入风险
   🟠 警告: 12 个未处理异常
   🟡 建议: 8 处可优化的性能问题
   
   详细报告已保存到 report.md，需要我修复这些问题吗？
```

---

## 📁 项目结构

```
spirit-one/
├── src/                      # 🎯 核心源码
│   ├── index.ts              #    网关入口
│   ├── ai/                   #    AI 模型调度
│   │   └── model-dispatcher.ts  #  多模型智能调度
│   ├── moltbot/              #    Moltbot 桥接
│   │   └── moltbot-bridge.ts #    Agent 执行引擎
│   ├── spirit/               #    精灵人格系统
│   │   ├── spirit-persona.ts #    人格定义
│   │   ├── user-settings.ts  #    用户设置
│   │   └── feishu-cards.ts   #    飞书交互卡片
│   ├── security/             #    安全确认系统
│   │   ├── sensitive-operations.ts
│   │   ├── feishu-confirm.ts
│   │   └── secure-executor.ts
│   └── memory/               #    混合记忆系统
│
├── core/                     # 🧠 核心大脑
│   ├── src/                  #    核心逻辑
│   │   ├── ai.ts             #    AI 推理
│   │   ├── consciousness-loop.ts
│   │   ├── knowledge-graph.ts
│   │   ├── memory-pyramid.ts
│   │   └── tools.ts
│   └── migrations/           #    数据库迁移
│
├── channels/                 # 📱 多渠道网关
│   ├── feishu/               #    飞书
│   ├── wecom/                #    企业微信
│   └── dingtalk/             #    钉钉
│
├── soul-bridge/              # 💫 灵魂桥接
│   ├── SOUL.md               #    精灵人格定义
│   └── AGENTS.md             #    Agent 行为准则
│
├── libs/moltbot/             # 📚 Moltbot 工具库
├── config/                   # ⚙️ 配置文件
├── scripts/                  # 🔧 脚本
├── docs/                     # 📖 文档
├── docker-compose.yml        # 🐳 Docker
├── ecosystem.config.js       # 🔄 PM2
└── Dockerfile
```

---

## 🔐 安全机制

### 飞书控制指令

| 指令 | 功能 |
|------|------|
| `/stop` 或 `/终止` | 立即终止精灵1号所有操作 |
| `/resume` 或 `/恢复` | 恢复精灵1号运行 |
| `/status` 或 `/状态` | 查询精灵1号状态 |

### 敏感操作确认

当精灵1号要执行以下操作时，会发送飞书卡片请求确认：

- 🔴 **极高风险**: 删除文件、支付操作、修改系统配置
- 🟠 **高风险**: Shell 命令、数据库写入、修改重要文件
- 🟡 **中等风险**: 发送消息到其他平台

---

## ✅ 开箱即用

**桌面版**：下载 → 安装 → 使用，不需要任何依赖！

所有能力已内置打包，用户无需安装 Node.js 或其他工具。

---

## 📥 下载安装（推荐）

### 🍎 macOS 桌面版

| 芯片类型 | 下载链接 |
|---------|---------|
| **Apple Silicon** (M1/M2/M3) | [精灵1号-arm64.dmg](https://github.com/spirit-one/spirit-one/releases) |
| **Intel** | [精灵1号-x64.dmg](https://github.com/spirit-one/spirit-one/releases) |

> 💡 点击左上角  → 关于本机，查看"芯片"类型

### 🪟 Windows 桌面版

| 系统 | 下载链接 |
|-----|---------|
| Windows 10/11 (64位) | [精灵1号-Setup.exe](https://github.com/spirit-one/spirit-one/releases) |

**安装后：**
1. 双击打开应用
2. 配置一个 AI 服务的 API Key
3. 给精灵取个名字
4. 开始聊天！

详见 [桌面版文档](./desktop/README.md)

---

## 🔧 服务端部署（高级）

如果你需要通过飞书/企业微信使用，或者需要部署到服务器：

### 1. 安装依赖

```bash
npm install
```

### 2. 配置环境变量

```bash
cp config/env.template .env
# 编辑 .env 填写你的配置
```

### 3. 启动服务

```bash
# 开发模式
npm run dev

# 生产模式
npm run build && npm start

# Docker
docker-compose up -d
```

### 4. 配置飞书回调

- 消息回调: `https://your-domain/callback/feishu`
- 卡片回调: `https://your-domain/callback/feishu/card`

---

## 🌟 愿景

> **精灵1号不是工具，是伙伴**
>
> - 能主动学习、探索、成长
> - 能自己创建和管理 AI Agent
> - 能协调多个 Agent 完成复杂任务
> - 能向用户汇报进度和结果
> - 真正的人机协作，共创未来

---

## 📚 详细文档

| 文档 | 内容 |
|------|------|
| [愿景与定位](./docs/01-愿景与定位.md) | 精灵1号是什么，为什么这样设计 |
| [核心能力设计](./docs/02-核心能力设计.md) | 眼睛、手、大脑、自学、授权、安全 |
| [技术架构](./docs/03-技术架构.md) | 基于 Moltbot 延伸，项目结构 |
| [产品形态](./docs/04-产品形态.md) | 飞书入口 + Web 管理 + 云端服务 |
| [开发路线图](./docs/05-开发路线图.md) | 2周 MVP，详细任务清单 |
| [安全与用户体验](./docs/06-安全与用户体验设计.md) | 安全审计、傻瓜式使用 |
| [商业模式设计](./docs/07-商业模式设计.md) | 会员订阅 + 自带Key |
| [品牌与视觉设计](./docs/08-品牌与视觉设计.md) | 精灵家族、配色、动画规范 |

---

## 💬 飞书指令

| 指令 | 功能 |
|------|------|
| `/设置` | 打开精灵设置（改名、换形象） |
| `/帮助` | 显示使用指南 |
| `/状态` | 查询精灵状态 |
| `/统计` | 查看使用统计 |
| `/终止` | 紧急停止所有操作 |
| `/恢复` | 恢复精灵运行 |
| `/agent <任务>` | 派发任务给 AI Agent |

---

## 📅 版本

| 版本 | 日期 | 更新 |
|------|------|------|
| v0.6.0 | 2026-01-31 | 🚀 **Moltbot 深度集成** - 完整 Agent 能力接入 |
| v0.5.0 | 2026-01-31 | 桌面应用 Electron 框架搭建 |
| v0.3.0 | 2026-01-31 | 精灵人格系统、多模型调度、用户设置、飞书交互卡片 |
| v0.2.0 | 2026-01-30 | 安全确认机制、一键终止、项目结构整理、完整文档 |
| v0.1.0 | 2026-01-29 | 初始版本 |

### v0.6.0 更新内容

**Moltbot 深度集成 - 真正的 AI Agent 能力**

- ✅ **Agent 引擎接入**: 集成 Moltbot 作为后端引擎，通过子进程调用
- ✅ **灵魂注入机制**: `soul-bridge/` 目录定义精灵人格，自动注入 `~/clawd/`
- ✅ **多模型支持**: 支持硅基流动、OpenRouter 等中转站，用户可自配 API Key
- ✅ **工具调用能力**:
  - `exec` - 执行 Shell 命令（打开应用、操作文件）
  - `browser` - Playwright 浏览器自动化
  - `read/write/edit` - 文件操作
  - `web_search/web_fetch` - 网络搜索
  - `tts` - 语音合成
  - `cron` - 定时任务
- ✅ **视觉能力**: 配置国产视觉模型 Qwen2-VL，支持截图分析
- ✅ **Gateway 服务**: 自动安装为系统服务，支持设备配对
- ✅ **安全的密钥管理**: API Key 通过环境变量传递，不硬编码

---

## 🤝 贡献

欢迎 PR 和 Issue！

## 📄 License

MIT

---

<p align="center">
  <strong>精灵1号 - 你的数字生命伴侣</strong> ✨
</p>
